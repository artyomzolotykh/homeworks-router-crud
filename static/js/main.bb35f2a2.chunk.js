(this["webpackJsonphomeworks-router-crud"]=this["webpackJsonphomeworks-router-crud"]||[]).push([[0],{14:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),o=n(9),a=n.n(o),i=(n(14),n(4)),r=n(5),l=n(2),j=n(1),u=function(e){return Object(j.jsxs)("div",{className:"NewPostPage",children:[Object(j.jsx)(r.b,{to:"/",children:"Close"}),Object(j.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.handleSubmit()},children:[Object(j.jsx)("textarea",{placeholder:"\u041f\u043e\u0441\u0442, \u043e\u0442\u043d\u043e\u0441\u044f\u0449\u0438\u0439\u0441\u044f \u043a \u043a\u0443\u0440\u0441\u0443 React",value:e.message,onChange:function(t){var n=t.target.value;e.handleMessage(n)}}),Object(j.jsx)("button",{type:"submit",children:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c"})]})]})},d=n(6),b=n.n(d),h=function(e){var t=Object(l.g)(),n=e.listing.filter((function(e){return Number(e.id)===Number(t.id)})),s=Object(c.useState)(!1),o=Object(i.a)(s,2),a=o[0],r=o[1];console.log(n);var u=function(){r(!0)},d=function(t){t.preventDefault(),console.log(t);var c=t.target[0].value;console.log(c),e.changePostSubmit(n[0].id,c)},h=function(){return Object(j.jsxs)("form",{onSubmit:d,children:[Object(j.jsx)("textarea",{defaultValue:n[0].content}),Object(j.jsx)("input",{type:"submit"})]})},f=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"PostCardPage_created",children:["\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e: ",b()(n[0].created).fromNow()]}),Object(j.jsx)("div",{className:"PostCardPage_content",children:n[0].content}),Object(j.jsxs)("div",{className:"PostCardPage_buttons",children:[Object(j.jsx)("button",{className:"blue-button",onClick:u,children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(j.jsx)("button",{className:"red-button",onClick:function(){return t=n[0].id,void e.deletePost(t);var t},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})};return Object(j.jsx)("div",{className:"PostCardPage",children:a?Object(j.jsx)(h,{}):Object(j.jsx)(f,{})})},f=function(e){var t=e.item;return Object(j.jsxs)(r.b,{className:"Card",to:"/posts/".concat(t.id),children:[Object(j.jsxs)("div",{className:"card_created",children:["\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e: ",b()(t.created).fromNow()]}),Object(j.jsx)("div",{className:"card_content",children:t.content})]})},O=function(e){var t=e.listing;return Object(j.jsxs)("div",{className:"PostsPage",children:[Object(j.jsx)(r.b,{to:"/posts/new",className:"PostsPage_link",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0441\u0442"}),t.map((function(e){return Object(j.jsx)(f,{item:e},e.id)}))]})};var m=function(){var e="http://localhost:7777/posts/",t=Object(c.useState)([]),n=Object(i.a)(t,2),s=n[0],o=n[1],a=Object(c.useState)(""),d=Object(i.a)(a,2),b=d[0],f=d[1];return Object(c.useEffect)((function(){fetch(e).then((function(e){return e.json()})).then((function(e){return o(e)}))}),[]),Object(j.jsx)(r.a,{children:Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)(l.c,{children:[Object(j.jsx)(l.a,{path:"/",exact:!0,element:Object(j.jsx)(O,{listing:s})}),Object(j.jsx)(l.a,{path:"/posts/new",exact:!0,element:Object(j.jsx)(u,{listing:s,message:b,handleSubmit:function(){var t={id:0,content:b};fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(){document.location.href="/"}))},handleMessage:function(e){f(e)}})}),Object(j.jsx)(l.a,{path:"/posts/:id",exact:!0,element:s.length?Object(j.jsx)(h,{listing:s,deletePost:function(t){fetch(e+t,{method:"DELETE"}).then((function(){document.location.href="/"}))},changePostSubmit:function(t,n){var c={id:t,content:n};console.log(c),fetch(e,{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then((function(){document.location.href="/"}))}}):Object(j.jsx)("p",{children:"Loading..."})})]})})})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),o(e),a(e)}))};a.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(m,{})}),document.getElementById("root")),x()}},[[17,1,2]]]);
//# sourceMappingURL=main.bb35f2a2.chunk.js.map