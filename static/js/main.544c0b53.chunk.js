(this["webpackJsonphomeworks-router-crud"]=this["webpackJsonphomeworks-router-crud"]||[]).push([[0],{14:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),s=n(9),r=n.n(s),a=(n(14),n(4)),i=n(5),u=n(2),d=n(1),l=function(e){return Object(d.jsxs)("div",{className:"NewPostPage",children:[Object(d.jsx)(i.b,{to:"/homeworks-router-crud/",children:"Close"}),Object(d.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.handleSubmit()},children:[Object(d.jsx)("textarea",{placeholder:"\u041f\u043e\u0441\u0442, \u043e\u0442\u043d\u043e\u0441\u044f\u0449\u0438\u0439\u0441\u044f \u043a \u043a\u0443\u0440\u0441\u0443 React",value:e.message,onChange:function(t){var n=t.target.value;e.handleMessage(n)}}),Object(d.jsx)("button",{type:"submit",children:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c"})]})]})},j=n(6),h=n.n(j),b=function(e){var t=Object(u.g)(),n=e.listing.filter((function(e){return Number(e.id)===Number(t.id)})),o=Object(c.useState)(!1),s=Object(a.a)(o,2),r=s[0],i=s[1];console.log(n);var l=function(){i(!0)},j=function(t){t.preventDefault(),console.log(t);var c=t.target[0].value;console.log(c),e.changePostSubmit(n[0].id,c)},b=function(){return Object(d.jsxs)("form",{onSubmit:j,children:[Object(d.jsx)("textarea",{defaultValue:n[0].content}),Object(d.jsx)("input",{type:"submit"})]})},m=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"PostCardPage_created",children:["\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e: ",h()(n[0].created).fromNow()]}),Object(d.jsx)("div",{className:"PostCardPage_content",children:n[0].content}),Object(d.jsxs)("div",{className:"PostCardPage_buttons",children:[Object(d.jsx)("button",{className:"blue-button",onClick:l,children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(d.jsx)("button",{className:"red-button",onClick:function(){return t=n[0].id,void e.deletePost(t);var t},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})};return Object(d.jsx)("div",{className:"PostCardPage",children:r?Object(d.jsx)(b,{}):Object(d.jsx)(m,{})})},m=function(e){var t=e.item;return Object(d.jsxs)(i.b,{className:"Card",to:"/homeworks-router-crud/posts/".concat(t.id),children:[Object(d.jsxs)("div",{className:"card_created",children:["\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e: ",h()(t.created).fromNow()]}),Object(d.jsx)("div",{className:"card_content",children:t.content})]})},f=function(e){var t=e.listing;return Object(d.jsxs)("div",{className:"PostsPage",children:[Object(d.jsx)(i.b,{to:"/homeworks-router-crud/posts/new",className:"PostsPage_link",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0441\u0442"}),t.map((function(e){return Object(d.jsx)(m,{item:e},e.id)}))]})};var O=function(){var e="http://localhost:7777/posts/",t=Object(c.useState)([]),n=Object(a.a)(t,2),o=n[0],s=n[1],r=Object(c.useState)(""),j=Object(a.a)(r,2),h=j[0],m=j[1];return Object(c.useEffect)((function(){fetch(e).then((function(e){return e.json()})).then((function(e){return s(e)}))}),[]),Object(d.jsx)(i.a,{children:Object(d.jsx)("div",{className:"App",children:Object(d.jsxs)(u.c,{children:[Object(d.jsx)(u.a,{path:"/homeworks-router-crud/",exact:!0,element:Object(d.jsx)(f,{listing:o})}),Object(d.jsx)(u.a,{path:"/homeworks-router-crud/posts/new",exact:!0,element:Object(d.jsx)(l,{listing:o,message:h,handleSubmit:function(){var t={id:0,content:h};fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(){document.location.href="/homeworks-router-crud/"}))},handleMessage:function(e){m(e)}})}),Object(d.jsx)(u.a,{path:"/homeworks-router-crud/posts/:id",exact:!0,element:o.length?Object(d.jsx)(b,{listing:o,deletePost:function(t){fetch(e+t,{method:"DELETE"}).then((function(){document.location.href="/homeworks-router-crud/"}))},changePostSubmit:function(t,n){var c={id:t,content:n};console.log(c),fetch(e,{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then((function(){document.location.href="/homeworks-router-crud/"}))}}):Object(d.jsx)("p",{children:"Loading..."})})]})})})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),o(e),s(e),r(e)}))};r.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(O,{})}),document.getElementById("root")),x()}},[[17,1,2]]]);
//# sourceMappingURL=main.544c0b53.chunk.js.map